test@syzkaller:~$ ./test
[   95.806790] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x106fc8000, vaddr: 0x00000000be5069d3, size: 4096)
[   95.807387] [test] __pmd_alloc: pmd_t at 0x00000000be5069d3+0x0 for vaddr: 0x7fff58b8f000
[   95.807716] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x106ffc000, vaddr: 0x000000006feb4f23, size: 4096)
[   95.808152] [test] pgtable_pte_page_ctor: page: 0x0000000096012a51 (phys: 0x106ffc000, vaddr: 0x000000006feb4f23, size: 4096)
[   95.809162] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x102b22000, vaddr: 0x00000000ad779733, size: 4096)
[   95.809651] [test] __pud_alloc: pud_t at 0x00000000ad779733+0x0 for vaddr: 0x5611b8d040b8
[   95.809901] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x106d34000, vaddr: 0x000000004cd9aa6c, size: 4096)
[   95.810191] [test] __pmd_alloc: pmd_t at 0x000000004cd9aa6c+0x0 for vaddr: 0x5611b8d040b8
[   95.810597] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x102aba000, vaddr: 0x000000001711855c, size: 4096)
[   95.811025] [test] pgtable_pte_page_ctor: page: 0x00000000bf5b08fb (phys: 0x102aba000, vaddr: 0x000000001711855c, size: 4096)
[   95.811664] [test] __do_fault_exit: fault vaddr: 0x5611b8d04000
[   95.811664]  - vmf->prealloc_pte: 0x00000000bf5b08fb
[   95.811664]  - vmf->pud: 0x0000000002c30e45 (pud_val: 0x106d34067)
[   95.811664]  - vmf->pmd: 0x00000000db3b6040 (pmd_val: 0x0)
[   95.811664]  - vmf->pte: 0x0000000000000000
[   95.811664]  - vmf->orig_pte/orig_pmd: 0x0
[   95.811664]  - vmf->page_off: 3
[   95.811664]  - vmf->page: 0x000000007cddaa6c (phys: 0x108f39000, vaddr: 0x00000000c5e1a4c3, dirty: 1, size: 4096)
[   95.812965]  - vmf->cow_page: 0x00000000e3ede63a(phys: 0x106b3f000, vaddr: 0x00000000cdb13327, size: 4096)
[   95.813234]  - pte (found by fault vaddr): 0x00000000a8fe17b0 (pte_val: 0x0)
[   95.813234]  - pte_page: 0x0000000098081a17 (phys: 0x0, vaddr: 0x00000000460a9d6c, size: 4096)
[   95.814607] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x102b33000, vaddr: 0x00000000b642d2eb, size: 4096)
[   95.817935] [test] __pmd_alloc: pmd_t at 0x00000000b642d2eb+0x0 for vaddr: 0x7f9ab4fd8090
[   95.818186] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x106d2c000, vaddr: 0x00000000c8fd5fcf, size: 4096)
[   95.818454] [test] pgtable_pte_page_ctor: page: 0x000000008d70d0be (phys: 0x106d2c000, vaddr: 0x00000000c8fd5fcf, size: 4096)
[   95.819250] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x100327000, vaddr: 0x000000003bd74484, size: 4096)
[   95.819962] [test] pgtable_pte_page_ctor: page: 0x0000000027f593ab (phys: 0x100327000, vaddr: 0x000000003bd74484, size: 4096)
[   95.820318] [test] __do_fault_exit: fault vaddr: 0x7f9ab5001000
[   95.820318]  - vmf->prealloc_pte: 0x0000000027f593ab
[   95.820318]  - vmf->pud: 0x00000000dedbcf51 (pud_val: 0x102b33067)
[   95.820318]  - vmf->pmd: 0x00000000e17052b6 (pmd_val: 0x0)
[   95.820318]  - vmf->pte: 0x0000000000000000
[   95.820318]  - vmf->orig_pte/orig_pmd: 0x0
[   95.820318]  - vmf->page_off: 41
[   95.820318]  - vmf->page: 0x0000000040d5ad9b (phys: 0x13ff1d000, vaddr: 0x000000008927cb3f, dirty: 0, size: 4096)
[   95.821826]  - vmf->cow_page: 0x000000001f2a1251(phys: 0x107572000, vaddr: 0x00000000befdfbc2, size: 4096)
[   95.822149]  - pte (found by fault vaddr): 0x00000000f059dd6d (pte_val: 0xf000ff53f000e2c3)
[   95.822149]  - pte_page: 0x0000000098081a17 (phys: 0x0, vaddr: 0x00000000460a9d6c, size: 4096)
[   95.825875] [test] __do_fault_exit: fault vaddr: 0x7fff58bb0000
[   95.825875]  - vmf->prealloc_pte: 0x0000000000000000
[   95.825875]  - vmf->pud: 0x000000001d53ba6d (pud_val: 0x106fc8067)
[   95.825875]  - vmf->pmd: 0x0000000099ed28fb (pmd_val: 0x106ffc067)
[   95.825875]  - vmf->pte: 0x0000000000000000
[   95.825875]  - vmf->orig_pte/orig_pmd: 0x0
[   95.825875]  - vmf->page_off: 0
[   95.825875]  - vmf->page: 0x00000000a09a46c7 (phys: 0x278c000, vaddr: 0x00000000d0953cdb, dirty: 0, size: 4096)
[   95.827887]  - pte (found by fault vaddr): 0x00000000aaf0ecb7 (pte_val: 0x0)
[   95.827887]  - pte_page: 0x0000000096012a51 (phys: 0x106ffc000, vaddr: 0x000000006feb4f23, size: 4096)
[   95.835689] [test] __do_fault_exit: fault vaddr: 0x7f9ab4fcc000
[   95.835689]  - vmf->prealloc_pte: 0x0000000000000000
[   95.835689]  - vmf->pud: 0x00000000dedbcf51 (pud_val: 0x102b33067)
[   95.835689]  - vmf->pmd: 0x00000000089f7649 (pmd_val: 0x106d2c067)
[   95.835689]  - vmf->pte: 0x0000000000000000
[   95.835689]  - vmf->orig_pte/orig_pmd: 0x0
[   95.835689]  - vmf->page_off: 462
[   95.835689]  - vmf->page: 0x000000004967a3be (phys: 0x13fe30000, vaddr: 0x00000000f9ca1229, dirty: 0, size: 4096)
[   95.837769]  - vmf->cow_page: 0x0000000023550664(phys: 0x1071c3000, vaddr: 0x000000007462473b, size: 4096)
[   95.837995]  - pte (found by fault vaddr): 0x0000000069dbfa26 (pte_val: 0x0)
[   95.837995]  - pte_page: 0x000000008d70d0be (phys: 0x106d2c000, vaddr: 0x00000000c8fd5fcf, size: 4096)
[   95.839057] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x106cd2000, vaddr: 0x000000005bd1c593, size: 4096)
[   95.839585] [test] pgtable_pte_page_ctor: page: 0x0000000024534767 (phys: 0x106cd2000, vaddr: 0x000000005bd1c593, size: 4096)
[   95.847639] [test] __do_fault_exit: fault vaddr: 0x7f9ab5000000
[   95.847639]  - vmf->prealloc_pte: 0x0000000000000000
[   95.847639]  - vmf->pud: 0x00000000dedbcf51 (pud_val: 0x102b33067)
[   95.847639]  - vmf->pmd: 0x00000000e17052b6 (pmd_val: 0x100327067)
[   95.847639]  - vmf->pte: 0x0000000000000000
[   95.847639]  - vmf->orig_pte/orig_pmd: 0x0
[   95.847639]  - vmf->page_off: 0
[   95.847639]  - vmf->page: 0x000000000e17ad4c (phys: 0x104c66000, vaddr: 0x000000003a698910, dirty: 0, size: 4096)
[   95.848566]  - pte (found by fault vaddr): 0x000000003bd74484 (pte_val: 0x0)
[   95.848566]  - pte_page: 0x0000000027f593ab (phys: 0x100327000, vaddr: 0x000000003bd74484, size: 4096)
[   95.849394] mempolicy: [test] alloc_pages: allocate order-1 pages (phys: 0x10840e000, vaddr: 0x00000000b7b5e24b, size: 4096)
[   95.849934] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x106cd3000, vaddr: 0x000000003ff24eae, size: 4096)
[   95.850232] [test] __pud_alloc: pud_t at 0x000000003ff24eae+0x0 for vaddr: 0x5611b8d03000
[   95.850412] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x100326000, vaddr: 0x00000000aaf07796, size: 4096)
[   95.850886] [test] __pmd_alloc: pmd_t at 0x00000000aaf07796+0x0 for vaddr: 0x5611b8d03000
[   95.851104] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x106d0b000, vaddr: 0x0000000069e3eb52, size: 4096)
[   95.851459] [test] pgtable_pte_page_ctor: page: 0x000000003ac62a26 (phys: 0x106d0b000, vaddr: 0x0000000069e3eb52, size: 4096)
[   95.851795] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x106d0a000, vaddr: 0x000000003ac3bbe2, size: 4096)
[   95.851846] [test] __pud_alloc: pud_t at 0x000000003ac3bbe2+0x0 for vaddr: 0x7f9ab4fc7000
[   95.851846] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x102abb000, vaddr: 0x00000000b9c978d7, size: 4096)
[   95.852740] [test] __pmd_alloc: pmd_t at 0x00000000b9c978d7+0x0 for vaddr: 0x7f9ab4fc7000
[   95.853006] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x10843a000, vaddr: 0x00000000c3b3f17a, size: 4096)
[   95.853319] [test] pgtable_pte_page_ctor: page: 0x000000003b5eb3ae (phys: 0x10843a000, vaddr: 0x00000000c3b3f17a, size: 4096)
[   95.853924] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x101ac1000, vaddr: 0x00000000079ae2f3, size: 4096)
[   95.854199] [test] pgtable_pte_page_ctor: page: 0x0000000072edb6d2 (phys: 0x101ac1000, vaddr: 0x00000000079ae2f3, size: 4096)
[   95.854734] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x10843f000, vaddr: 0x0000000026d955ce, size: 4096)
[   95.854997] [test] __pmd_alloc: pmd_t at 0x0000000026d955ce+0x0 for vaddr: 0x7fff58b6f000
[   95.855191] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x106ccd000, vaddr: 0x000000009f2ea237, size: 4096)
[   95.855417] [test] pgtable_pte_page_ctor: page: 0x00000000441cc7d9 (phys: 0x106ccd000, vaddr: 0x000000009f2ea237, size: 4096)
[   95.857203] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x106d33000, vaddr: 0x000000008c3e804b, size: 4096)
[   95.857721] [test] pgtable_pte_page_ctor: page: 0x00000000e7f9cd11 (phys: 0x106d33000, vaddr: 0x000000008c3e804b, size: 4096)
[   95.860878] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x102b1c000, vaddr: 0x00000000ab0ba94b, size: 4096)
[   95.861592] [test] pgtable_pte_page_ctor: page: 0x000000000305cf78 (phys: 0x102b1c000, vaddr: 0x00000000ab0ba94b, size: 4096)
[+] creating user namespace (CLONE_NEWUSER)...
[   95.863637] mempolicy: [test] alloc_pages: allocate order-1 pages (phys: 0x106ebc000, vaddr: 0x00000000cb3ae27d, size: 8192)
[+] creating network namespace (CLONE_NEWNET)...
[   95.865396] mempolicy: [test] alloc_pages: allocate order-3 pages (phys: 0x102b28000, vaddr: 0x00000000a01d7601, size: 32768)
[   95.866864] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x101a99000, vaddr: 0x00000000f59acb06, size: 4096)
[   95.867980] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x10135e000, vaddr: 0x0000000025931ce8, size: 4096)
[   95.868873] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x1002f8000, vaddr: 0x000000000200084c, size: 4096)
[   95.870329] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x106ca6000, vaddr: 0x000000006783f458, size: 4096)
[   95.870861] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x106d31000, vaddr: 0x00000000e63f9773, size: 4096)
[   95.871165] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x102b3b000, vaddr: 0x0000000099ff7661, size: 4096)
[   95.871442] mempolicy: [test] alloc_pages: allocate order-2 pages (phys: 0x102a44000, vaddr: 0x000000008be612ce, size: 16384)
[   95.872301] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x102bbd000, vaddr: 0x00000000cad132ac, size: 4096)
[   95.873149] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x108436000, vaddr: 0x00000000819fdad4, size: 4096)
[   95.873916] mempolicy: [test] alloc_pages: allocate order-3 pages (phys: 0x102a48000, vaddr: 0x0000000072858fd3, size: 32768)
[   95.874478] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x102b3d000, vaddr: 0x0000000033a9b0c7, size: 4096)
[   95.875100] mempolicy: [test] alloc_pages: allocate order-1 pages (phys: 0x104b0c000, vaddr: 0x0000000044415c60, size: 8192)
[   95.875386] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x101a28000, vaddr: 0x000000001f4d9471, size: 4096)
[   95.876339] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x102b20000, vaddr: 0x000000002dde1f64, size: 4096)
[+] setting up UID namespace...
[+] mapping uid 1000 to namespace uid 0...
[+] deny namespace rights to set user groups...
[+] mapping gid 1000 to namespace gid 0...
[+] doing first useless allocs to setup caching and stuff...
[+] allocate a PUD (and a PMD+PTE) for PMD
[+] Write to [0:0x1000] at 0x40000000
[   95.891253] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x101a62000, vaddr: 0x0000000061b31cbf, size: 4096)
[   95.891892] [test] __pud_alloc: pud_t at 0x0000000061b31cbf+0x0 for vaddr: 0x40000000
[   95.892303] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x101a63000, vaddr: 0x0000000007b57588, size: 4096)
[   95.892920] [test] __pmd_alloc: pmd_t at 0x0000000007b57588+0x0 for vaddr: 0x40000000
[   95.894302] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x101ae0000, vaddr: 0x0000000075d126fb, size: 4096)
[   95.895041] [test] pgtable_pte_page_ctor: page: 0x000000001c2f33e9 (phys: 0x101ae0000, vaddr: 0x0000000075d126fb, size: 4096)
[   95.895483] [test] __do_fault_exit: fault vaddr: 0x40000000
[   95.895483]  - vmf->prealloc_pte: 0x000000001c2f33e9
[   95.895483]  - vmf->pud: 0x000000004a2850fc (pud_val: 0x101a63067)
[   95.895483]  - vmf->pmd: 0x0000000007b57588 (pmd_val: 0x0)
[   95.895483]  - vmf->pte: 0x0000000000000000
[   95.895483]  - vmf->orig_pte/orig_pmd: 0x0
[   95.895483]  - vmf->page_off: 0
[   95.895483]  - vmf->page: 0x000000007e1f9e53 (phys: 0x108f3b000, vaddr: 0x0000000098fd439b, dirty: 0, size: 4096)
[   95.897089]  - pte (found by fault vaddr): 0x00000000460a9d6c (pte_val: 0xf000ff53f000ff53)
[   95.897089]  - pte_page: 0x0000000098081a17 (phys: 0x0, vaddr: 0x00000000460a9d6c, size: 4096)
[+] Write to [0:0x1000] done
[+] Write to [0x1000:0x2000] at 0x40001000
[   95.900250] [test] __do_fault_exit: fault vaddr: 0x40001000
[   95.900250]  - vmf->prealloc_pte: 0x0000000000000000
[   95.900250]  - vmf->pud: 0x000000004a2850fc (pud_val: 0x101a63067)
[   95.900250]  - vmf->pmd: 0x0000000007b57588 (pmd_val: 0x101ae0067)
[   95.900250]  - vmf->pte: 0x0000000000000000
[   95.900250]  - vmf->orig_pte/orig_pmd: 0x0
[   95.900250]  - vmf->page_off: 1
[   95.900250]  - vmf->page: 0x000000005b6f8960 (phys: 0x1071e5000, vaddr: 0x00000000f2bf5c0f, dirty: 0, size: 4096)
[   95.901818]  - pte (found by fault vaddr): 0x000000006ba1f814 (pte_val: 0x0)
[   95.901818]  - pte_page: 0x000000001c2f33e9 (phys: 0x101ae0000, vaddr: 0x0000000075d126fb, size: 4096)
[+] Write to [0x1000:0x2000] done
[+] Write to [0x2000:0x3000] at 0x40002000
[   95.904738] [test] __do_fault_exit: fault vaddr: 0x40002000
[   95.904738]  - vmf->prealloc_pte: 0x0000000000000000
[   95.904738]  - vmf->pud: 0x000000004a2850fc (pud_val: 0x101a63067)
[   95.904738]  - vmf->pmd: 0x0000000007b57588 (pmd_val: 0x101ae0067)
[   95.904738]  - vmf->pte: 0x0000000000000000
[   95.904738]  - vmf->orig_pte/orig_pmd: 0x0
[   95.904738]  - vmf->page_off: 2
[   95.904738]  - vmf->page: 0x0000000085c7ee7c (phys: 0x108110000, vaddr: 0x00000000fa028e33, dirty: 0, size: 4096)
[   95.906319]  - pte (found by fault vaddr): 0x000000003e6cd482 (pte_val: 0x0)
[   95.906319]  - pte_page: 0x000000001c2f33e9 (phys: 0x101ae0000, vaddr: 0x0000000075d126fb, size: 4096)
[+] Write to [0x2000:0x3000] done
[   95.908740] [test] __do_fault_exit: fault vaddr: 0x7f9ab5000000
[   95.908740]  - vmf->prealloc_pte: 0x0000000000000000
[   95.908740]  - vmf->pud: 0x00000000b0a88895 (pud_val: 0x102abb067)
[   95.908740]  - vmf->pmd: 0x00000000d924a9d9 (pmd_val: 0x101ac1067)
[   95.908740]  - vmf->pte: 0x0000000000000000
[   95.908740]  - vmf->orig_pte/orig_pmd: 0x0
[   95.908740]  - vmf->page_off: 0
[   95.908740]  - vmf->page: 0x000000000e17ad4c (phys: 0x104c66000, vaddr: 0x000000003a698910, dirty: 1, size: 4096)
[   95.910219]  - pte (found by fault vaddr): 0x00000000079ae2f3 (pte_val: 0x0)
[   95.910219]  - pte_page: 0x0000000072edb6d2 (phys: 0x101ac1000, vaddr: 0x00000000079ae2f3, size: 4096)
[   95.922008] mempolicy: [test] alloc_pages: allocate order-0 pages (phys: 0x1011a7000, vaddr: 0x00000000dc6e36eb, size: 4096)